- if @broken.any?
  %h1 Broken Videos
  %table.table.table-bordered
    %thead
      %tr
        %td Id
        %td Sender
        %td Group Name
        %td Members
        %td Filename
        %td Created At
    %tbody
      - @broken.each do |video|
        - if video.user.blank?
          %tr
            %td blank user
        - else
          %tr
            %td= video.id
            %td= video.user.username
            %td
              = video.conversation.name
            %td
              = video.conversation.member_names
              = "(#{video.conversation_id})"
            %td= video.filename
            %td
              %span.date{"data-time" => (video.created_at.to_i * 1000)}= video.created_at
%h1 Videos
%table.table.table-bordered
  %thead
    %tr
      %td Id
      %td Sender
      %td Group Name
      %td Members
      %td Filename
      %td Created At
      %td Subtitle
  %tbody
    - @videos.each do |video|
      - if video.user.blank?
        %tr
          %td blank user
      - else
        %tr
          %td= video.id
          %td= video.user.username
          %td= video.conversation.name
          %td
            %a{href: "/madmin/conversations/#{video.conversation_id}"}
              = video.conversation.member_names
              = "(#{video.conversation_id})"
          %td= video.filename
          %td
            %span.date{"data-time" => (video.created_at.to_i * 1000)}= video.created_at
          %td
            %span.subtitle
              - if video.subtitle.present?
                Y
= will_paginate(@videos)

:javascript
  $(document).ready(function() {
    var datecopy = $(".date");

    datecopy.each(function(el) {
      var timeString = $(this).attr("data-time");
      var unixTimestamp = parseInt(timeString);
      var date = new Date(unixTimestamp);

      $(this).html(date.toLocaleString());
    })
  })
