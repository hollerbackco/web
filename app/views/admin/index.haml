%h1 Broken Videos
%table.table.table-bordered
  %thead
    %tr
      %td Id
      %td Sender
      %td Group Name
      %td Members
      %td Filename
      %td Created At
  %tbody
    - @broken.each do |video|
      - if video.user.blank?
        %tr
          %td blank user
      - else
        %tr
          %td= video.id
          %td= video.user.username
          %td= video.conversation.name
          %td= video.conversation.member_names
          %td= video.filename
          %td
            %span.date{"data-time" => (video.created_at.to_i * 1000)}= video.created_at
%h1 Videos
%table.table.table-bordered
  %thead
    %tr
      %td Id
      %td Sender
      %td Group Name
      %td Members
      %td Filename
      %td Created At
  %tbody
    - @videos.each do |video|
      - if video.user.blank?
        %tr
          %td blank user
      - else
        %tr
          %td= video.id
          %td= video.user.username
          %td= video.conversation.name
          %td= video.conversation.member_names
          %td= video.filename
          %td
            %span.date{"data-time" => (video.created_at.to_i * 1000)}= video.created_at

%h1 Users
%table.table.table-bordered
  %thead
    %tr
      %td Id
      %td Username
      %td Verify Code
      %td Phone
      %td Conversations
      %td Videos (S/R)
      %td Created At
      %td App Version
  %tbody
    - @users.each do |user|
      %tr
        %td= user.id
        %td= user.username
        %td= user.verification_code
        %td= user.phone_normalized
        %td= user.memberships.count
        %td= "#{user.messages.sent.count}/#{user.messages.received.count}"
        %td
          %span.date{"data-time" => (user.created_at.to_i * 1000)}= user.created_at
        %td= user.last_app_version

:javascript
  $(document).ready(function() {
    var datecopy = $(".date");

    datecopy.each(function(el) {
      var timeString = $(this).attr("data-time");
      var unixTimestamp = parseInt(timeString);
      var date = new Date(unixTimestamp);

      $(this).html(date.toLocaleString());
    })
  })
